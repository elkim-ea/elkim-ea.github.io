---
layout: post
title: " 3.AWS(SAA) - EC2 - Solutions Architect Associate Level (Kor& Eng.ver) "
date: 2025-11-23
categories:
  - "Certification/AWS SAA"
tags: [SAA, 클라우드, 기초, Korean, English] 
---

#### Reference
- [Udemy – AWS Certified Solutions Architect Associate (SAA-C03)](https://www.udemy.com/course/aws-certified-solutions-architect-associate-saa-c03/?couponCode=CP251120G2)

---

# 1. Private vs Public vs elastic IP
## Private vs Public IP (IPv4)
- 네트워킹은 일종의 ip를 갖는것
- IPv4와 IPv6
  - IPv4: 1.160.10.240 (흔함)
  - IPv6: 3ffe:1990:4545:3:200:f8ff:fe21:67cf ((loT나 사물 인터넷을 위한 것))
- 기본적으로 IPv4 주로 사용 하지만 AWS에서는 IPv6도 지원함
- IPv4는 3개를 허용하고 공용공간에 70억개의 다른 주소가 있음
- IPv4는 0에서 255사이 즉, [0-255].[0-255].[0-255].[0-255]

---

## Private vs Public IP (IPv4) Example
<img src="{{ '/assets/img/images/aws/ipv4.png' | relative_url }}" alt="스크린샷" width="300">

- 사설 네트워크 내의 모든 컴퓨터가 사설 ip를 이용해 서로 통신
- 반면 인터넷 게이트웨이는 공용 게이트웨이이며, 이 인스턴스는 다른 서버에도 접근 가능하면 AWS의 공통적인 패턴임
- 즉, 공용 ip를 갖고 있다면 인터넷으로 액세스 가능하고 개인ip가 있다면 개인 네트워크 내에서만 액세스 가능 

---

## Private vs Public IP (IPv4) Fundamental Differences
- Public IP
  - Public IP는 기계가 인터넷(WWW)에서 식별될 수 있다는 의미
  - 웹 전체에서 유일
  (두 장비가 같은 공인 IP를 가질 수 없음)
  - **위치 기반 추적(Geo-location)**이 쉽게 가능
- Private IP
  - Private IP는 해당 기계가 사설 네트워크 안에서만 식별될 수 있다는 의미
  - 사설 네트워크 내부에서는 IP가 고유
  - 하지만 **서로 다른 사설 네트워크(예: 두 회사)**라면
  같은 IP 대역을 사용해도 문제가 없음
  - 사설 IP를 가진 장비는
  **인터넷 게이트웨이(일종의 프록시)**를 통해 WWW에 접속
  - 특정 범위의 IP 주소만 사설 IP로 사용

---

## Elastic IPs
- EC2 인스턴스를 중지했다가 다시 시작하면, 공인 IP 주소가 변경될 수 있음
- 인스턴스에 고정된 공인 IP가 필요하다면 Elastic IP가 필요
- 삭제하지 않는 한 계속 소유할 수 있는 공인 IPv4 주소
- **한 번에 하나의 인스턴스에만 연결(attach)**할 수 있음

---

## Elastic IP
- Elastic IP 주소를 사용하면, 인스턴스나 소프트웨어가 장애가 발생했을 때
해당 주소를 계정 내 다른 인스턴스로 빠르게 재매핑하여 장애를 감출 수 있음
- 한 AWS 계정에는 Elastic IP를 최대 5개까지 가질 수 있음
(필요하면 AWS에 요청하여 늘릴 수 있음)
- 전체적으로 보면, 가능하면 Elastic IP 사용을 피하는 것이 좋음
  - Elastic IP를 사용한다는 것은 아키텍처 설계가 좋지 않다는 신호
  - 대신, 랜덤한 Public IP를 사용하고 DNS 이름을 연결하는 것을 권장
  - 또는, 뒤에서 배우겠지만 로드 밸런서를 사용하고 Public IP를 직접 사용하지 않는 것이 더 좋음

---

## Private vs Public IP (IPv4) In AWS EC2 - Hands On
- 기본적으로, EC2 인스턴스는 두 가지 IP를 가짐
  - AWS 내부 네트워크용 사설 IP(Private IP)
  - 인터넷(WWW) 접속용 공인 IP(Public IP)
- 우리가 EC2 인스턴스에 SSH 접속할 때
  - 사설 IP는 사용할 수 없다, 왜냐하면 우리는 같은 네트워크에 있지 않기 때문
  - 공인 IP만 사용해서 SSH 연결 가능
- 인스턴스를 중지 후 다시 시작하면,
공인 IP는 변경될 수 있음

---

# 2. EC2 Placement Groups
## Placement Groups
- AWS의 하드으ㅔ어와는 직접적인 상호작용을 하지 않았지만 EC2 인스턴스를 어떻게 배치할지는 AWS에게 알려줌
- 3가지 전략
  - Cluster - 인스턴스가 단일 가용성 영역 내의 대기 시간이 짧은 하드웨어 셋업으로 함께 그룹화 됨
  - Spread - 인스턴스가 다양한 하드웨어에 걸쳐 확산됨 하지만, AZ당 퍼져있는 배치 그룹당 EC2 인스턴스는 7개만 가질 수 있는 제한이 있음 (중요한 애플리케이션이 있을때 배치 그룹 사용)
  - Partition - Spread와 유사하며, 인스턴스를 분산하고 싶은데 여기서는 여러 다른 파티션에 분산되어 AZ내의 여러 하드웨어 선반에 의존 즉, 여전히 퍼져있지만 다른 고장으로부터 고립되어있어 그룹당 수백개의 EC2 인스턴스로 스케일링할 수 있고 Hadoop이나 카산드라,카프카 같은 응용 프로그램을 실행 할 수 있음

---

## Placement Groups Cluster
- 인스턴스간의 초당 10기가의 대역폭이 있고 네트워킹이 활성화 됨
- 대기 사간은 짧고 네트워크는 처리량은 많음
- 단점 : 가용성 지대가 실패하면 모든 인스턴스가 동시에 실패
- 하지만, 일반적으로 사용되는 경우는 괜찮음
- 사용 사례
  - 빅데이터 작업으로 높은 네트워킹으로 빨리 끝내는것
  - 응용 프로그램 간 지연 시간이 극도로 짧고 처리량이 높은 네트워크

---

## Placement Groups Spread
- 실패위험을 최소화 하는것 (여러 아지트를 가로질러서 동시 오작동 위험이 줄어듬)
- 배포 배치 그룹을 요청하면 모든 EC2 인스턴스는 다른 하드웨어에 위치하게 됨
- 문제는 설치 그룹당 AZ당 7개의 인스턴스로 제한 (적당한크기로 해야함)
- 사용 사례
  - 고가용성을 극대화하고 리스크는 줄여야 하는 응용 프로그램
  - 일반적으로 중요한 애플리케이션에서는 인스턴스 실패가 서로 격리되어야함
  - 인스턴스 실패는 배치 그룹당 AZ당 7개의 인스턴스가 제한

---

## Placements Groups Partition
- T존에 걸쳐서 인스턴스를 배치
- AZ당 최대 7개의 파티션 가질 수 있음
- 많은 파티션을 가지게 됨으로써 인스턴스가 많은 하드웨어 선반에 분산되도록 함 그러면 선반 오류로부터 서로 안전
- 즉, AZ당 최대 7개의 파티션을 가질수 있고 같은 지역의 다중 가용성 지대에 걸쳐 분할 할 수 있음
- EC2 인스턴스를 수백 개까지 설정가능 
-다른 파티션의 인스턴스와 같은 하드웨어 물리랙을 공유하지 않음 그러므로 각 파티션은 실패로부터 격리
- 메타데이터 서비스를 이용해 이 정보에 액세스 하는 옵션이 있음
- 사용 사례
  - 큰 데이터 애플리케이션 
  - 파티션을 인식하는 애플리켄이션 (ex : HDFS, HBase, 카산드라, 카프카)

---

# 3. Elastic Network Interfaces (ENI) - Overview
## Elastic Network Interfaces (ENI)
- VPC의 구성요소로 가상 네트워크 카드로 나타냄 그래서 EC2 인스턴스가 네트워크 엑세스 권한을 주고 EC2 인스턴스 밖에서 사용됨
- 각각의 ENI의 속성
  - 주 개인 IPv4를 가질 수 있거나 하나 이상 가질 수 있음
  - 각각의 ENI는 사설 IPv4 당 탄성 IPv4를 가질 수 있음
  - 사설과 공용IP를 줌
  - ENI에 보안 팀의 하나 이상 부착할 수 있음
  - MAC 주소도 첨부할 수 있음
- EC2 인스턴스에서 독립적으로 ENI를 생성하고 즉시 첨부하거나 장애 조치를 위해 EC2 인스턴스에서 옮길 수 있음
- EC2 인스턴스에서 독립적으로 ENI를 생성하고 즉시 첨부하거나장애 조치를 위해 EC2 인스턴스에서 옮길 수 있음                          
: 특정 공간, 즉 AZ에 묶여 있음. 특정 AZ에서 ENI를 생성하면 특정 AZ에만 바인딩할 수 있음 만약 여기 하나 더 있다면(또 다른 ENI가 첨부되어 있다면)?                     
예를 들어 첫 번째 EC2 인스턴스에서 두번째 EC2 인스턴스로 EC1을 이동시켜 사설 IP를 이동시킴 사설 IP가 첫 번째 발급에서 인스턴스로 바뀌고 두 번째 EC2 인스턴스에 연결된다는 뜻!              
페일오버에 아주 유용함 (가령, 인스턴스가 사설 정적 IP에 의해
액세스하기 쉽다면 장애 조치 목적으로 이 두 인스턴스 사이로 IP를 이동할 수 있음)

---

# 4. EC2 Hibernate

## EC2 Hibernate
- Stop : the data on disk(EBS) is kept intact in the next start
- Terminate : any EBS volumes also set-up to be destroyed is lost
- The following happens
  - First: OS boots and the EC2 user data script is run
  - Next starts : the OS boots up
  - Then your application starts, caches get warmed up, and that can take time

- Introducing EC2 Hibernate
  - The in-memory (RAM) state is preserved
  - The instance boot is much faster because the OS is not stopped or restarted
  - Under the hood : the RAM state is written to a file the root EBS volume
  - The root EBS volume must be encrypted
- Use cases:
  - Long-running processing
  - Saving the RAM state
  - Servicees that take time to initialize

  ---

  ## EC2 Hibernate - Good to know
  - Supported Instance Families : C3, C4, C5, I3, M3, R3, T2,...
  - Instance RAM Size : must be less than 150 GB.
  - Instance Size : not supported for bare metal instance.
  - AMI : Amazon Linux 2, Kinux AMI, Ubuntu, RHEL, CentOS & Windows...
  - RootVolume : must be EBS, encrypted, not instance store, and large.
  - Available for On-Demand, Reserved and Spot Instances
  - An instance can NOT be hibernated more than 60 days