---
layout: post
title: " 1.AWS(SAA) - IAM & AWS CLI  (Kor.ver)"
date: 2025-11-21
categories:
  - "Certification/AWS SAA" 
tags: [SAA, 클라우드, 기초, Korean] 
---

#### Reference
- [Udemy – AWS Certified Solutions Architect Associate (SAA-C03)](https://www.udemy.com/course/aws-certified-solutions-architect-associate-saa-c03/?couponCode=CP251120G2)

---

# IAM : Users & Groups
- IAM : Identity and Access Management, Global service
- Root account : default이기에 사용자만 사용할 수 있고, 공유하면 안됨
- Users : 조직 안이나 그룹 안에 한 사람
- Groups : 그룹내에 포함된 사용자들만 가능하고 다른 그룹은 안됨
- 예를들어, IAM에는 3그룹 = devlopers, operation, audit teams 왜 사용자와 그룹을 생성할까? AWS 계정을 사용하고 싶기 때문에! 

---

# IAM : Permissions
- 사용자나 그룹은 JSON 문서를 할당 받을 수 있음

```javascript
{
      "Version": "2012-10-17",
      "Statement": [
        {
            "Effect": "Allow",
            "Action": "ec2:Describe*",
            "Resource": "*"
        },
        {
            "Effect": "Allow",
            "Action": "elasticloadbalancing:Describe*",
            "Resource": "*"
        },
        {
            "Effect": "Allow",
            "Action": [
                "cloudwatch:ListMetrics","cloudwatch:GetMetricStatistics",
                "cloudwatch:Describe*"
            ],
            "Resource": "*"
        }
    ]
}
```

- EC2 서비스를 사용하도록 허용하고, 탄력적 부하 분산 서비스를 사용하고, CloudWatch를 사용하는 설명을 볼 수 있음
이러한 사용자 권한을 정의
- AWS에서는 모두에게 모든걸 허용 할 수 없음 비용이 많이 들고 보안상 유효하지 않기 때문 그렇기에 최소한의 특권 원칙 (least privilege principle)을 적용

---

# IAM Policies inheritance
- Group : 그룹레벨에 보험을 첨부 그러면 구성원에게 적용되어 접근할 수 있고 상속 받게 됨 그리고 developers과 operations 그룹들 각각 정책이 다름
- User : 그룹에 속하지 않을 경우 inline 정책을 만들 수 있음 오로지 사용자에게만 연결되는 정책
- 두 그룹에 속할 경우, 두 정책이 적용

---

# IAM Policies Structure
- Version : 정책의 언어 버전
- Id : 정책을 확인하는 방법 (옵션)
- Statement : 한 개 또는 여러 개 (필수)
- Sid : 구문의 식별자 (옵션)
- Effect : 해당 구문이 특정 api에 대한 접근에 Allow/Deny 중으로 선택
- Principal : 어떤 계정, 사용자, 역할이 이 정책에 적옹될 것인지로 구성
- Action : api 호출 목록이면 Effect에 Allow나 Deny여부로 적용
- Resource : 작업을 할 리소스 목록
- Condition : 이 정책이 적용되기 위한 추가적인 제한 조건(옵션)

```javascript
{
      "Version": "2012-10-17",
      "Id": "S3-Account-permissions",
      "Statement" : [
        {
              "Sid": "1",
              "Effect": "Allow",
              "Principal": {
                  "AWS": ["arn:aws:iam::123456789012:root"]
              },
              "Action": [
                "s3:GetObject",
                "s3:PutObject"
              ],
              "Resource": ["arn:aws:s3:::mybucket/*"]
        }
    ]
}
```

---

# IAM - Password Policy
- Strong passwords = higher security for your account
- AWS에서 다양한 암호 정책
  - 최소 암호 길이 설정
  - 특정 문자 타입 요구
    - 대문자, 소문자, 비문자, 숫자, 물음표 등
  - 90일마다 사용자 암호를 변경(재사용 방지)

---

# Multi Factor Authentication - MFA
- AWS에서는 꼭 사용 (추천)
- 유저가 관리자라면 구성을 바꾸고 리소스를 삭제할 수 있음
- 유저의 Root Account와 모든 IAM users를 보호 
- 비밀번호 외에 보호는 MFA장치를 사용 
MFA = 암호 + 보안 장치 => 만약 암호를 해킹당해도 계정이 손상되지 않음 

---

# MFA device options in AWS
- 가상 MFA 장치 - (Google Authenticator, Authy)
  - 한 장치에 여러 개의 토큰을 지원, 오로지 핸드폰으로만 가능
- Universal 2nd Factor (U2F) Security Key - (YubiKey)
  - AWS의 제삼자가 사용하며 AWS가 아님 
  - USB 같이 생겼음
  - 단일 보안 키로 여러 개의 루트와 IAM 사용자를 지원(사용자수 만큼 필요없음) 
- Hardware Key Fob MFA Device - (Gemalto)
  - AWS의 제삼자
- Hardware Key Fob MFA Device for AWS GovCloud (US) - (SurePassID)
  - 특수 키 fob
  - AWS의 제삼자

---

# How can users access AWS?
- AWS에 접근하기위한 3가지 옵션
 - 괸리 콘솔 : 암호 + MFA
 - Command Line Interface(CLI) : 컴퓨터에 설치 access 키 + secret access 키 인증
 - Software Developer Kit(SDK) : 응용프로그램 코드 내에서 aws에서 api호출하고 싶을 때 사용
- access 키는 관리 콘솔을 통해 생성
- 암호는 다른 동료들과 공유하지 않아야함

---

# What's the AWS CLI?
: Command Line Interface
- Command Line Shell의 커맨드를 이용해 AWS서비스와 상호작용하게 하는 도구 (ex: aws, s3, cp 등)
- 사용하는 이유 : 모든 명령을 AWS로 시작하기 때문!!
- CLI를 통해 AWS 서비스의 공용 api에 직접 접근할 수 있음
- 리소스를 관리하고 일부 작업을 자동화 가능
- CLI는 소스 공개 (GitHub에서 찾을 수 있음)
- AWS 괸리 콘솔을 사용

---

# What's the AWS SDK?
: Software Developer Kit
- Language-specific APIs (라이브러리 세트)
- AWS 서비스와 api에 프로그래밍적으로 접근해 괸리
- 응용 프로그램 안에 삽입해 코딩
- Appliation이 SDK안에 있음
- 지원
  - js,python,java,go,c++,...
  - 모바일 SDKs (Android,iOS,...)
  - loT Device SDKs
- Example :파이썬을 위해 CLI는 AWS SDK에 구축 

---

# IAM Role for Service
- 작업을 하려면 일종의 권한이 필요 그래서 AWS 서비스에 권한을 부여
- IAM롤을 생성(IAM역할을 User와 비슷하지만 AWS 서비스 의해 사용)
- Common roles:
  - EC2 Instance Roles (IAM 롤을 사용 -> 할당된 권한이 정확하면 호출 접근 가능)
  - Lambda Function Roles
  - Roles for CloudFormation

---

# IAM Security Tools
- IAM Credentials Report (account-level)
  - 모든 꼐정 사용자와 다양한 자격 증명의 상태를 담고 있음
- IAM Access Advisor (user-level)
  - advisor는 user에게 승인된 서비스 권한과 서비스가 마지막으로 access된 시간 포함하여 보여줌
  - 도구를 이용해 권한이 사용되었는지 확인가능
  - user가 얻을 수 있는 권한은 최소 트권의 원칙과 인라인에 있음

---

# IAM Guidelines & Best Practices
- AWS 계정을 설정할 때를 제외하고는 루트 계정을 사용하지 말기 
- AWS user 하나 = 물리적 user 하나
- 그룹에 user를 할당할 수 있고 그룹에 권한을 할당할 수 있음
- 강력한 암호 정책 생성
- MFA의 사용과 시행이 가능하면 해커로부터 안전 보장
- AWS 서비스에 권한을 줄 때마다 역할을 생성하고 사용 (가상서버를 포함한 두개의 인스턴스도)
- AWS를 프로그램적으로 사용하거나 CLI나 SDK를 사용하면 access 키를 사용
- 계정 승인을 편집하기 위해 IAM 자격증명 보고서나 IAM access advisor 기능을 사용 할 수 있음
- IAM user와 access 키는 절대 공유하지 말기

---

# IAM Section - Summary
- Users : 회사 내 실제 user에 매핑되어야하며 이 user는 AWS 콘솔 암호를 소유
- Groups : users 만으로 그룹
- Policies : user나 그룹의 권한을 개요하는 정책이나 JSON문서를 첨부, 역할도 생성 가능
- Roles : EC2 인스턴스나 다른 AWS 서비스
- Security : MFA + 암호 정책
- AWS CLI : command-line AWS 서비스 관리
- AWS SDK : 프로그래밍 언어를 이용해 AWS 서비스 관리
- Access Keys : CLI나 SDK를 이용해 AWS access 키를 생성
- Audit : IAM 자격증명 보고서를 만들고 Advisor 서비스를 이용

---
